---
layout: post
title: "淘宝前端之智勇大闯关第三季攻略"
date: 2013-08-15 22:42
comments: true
categories: [javascript]
---

今天在群里看到好多人都在玩这游戏，都玩得挺high，自己也点进链接玩了下，第一次玩这类游戏，觉得挺有意思的，遂记录下自己的玩法。

首先，[游戏链接](http://ued.campus.alibaba.com/quiz3/index.php)如下：
```
http://ued.campus.alibaba.com/quiz3/index.php
```

<!-- more -->

该游戏一共有6关。

##第一关 —— 突破，带锁的门##

F12键打开控制台，输入以下代码，密码显现，按不同顺序尝试密码即可通关。

```js
[].forEach.call(Array(11).join('-'), powder.blow.bind(powder));
```

##第二关 —— 激光，前进的方向##

该关主要调整id为ma和mb两挡板元素的位置和角度形成反射即可通关，在控制台输入以下代码即可：

```js
(function (doc) {
  var mas = doc.getElementById('ma').style,
      mbs = doc.getElementById('mb').style;

  mas.top = '550px';
  mas.webkitTransform = 'rotate(-82deg)';

  mbs.top = '430px';
  mbs.webkitTransform = 'rotate(172deg)';
}).call(this, document);
```

##第三关 —— 坐标，隐藏的线索##

初看这个场景，看到三个定位角块，嗯这是二维码，但是是空白的，审查元素得知它是个canvas元素，需要画图将该二维码补充完整，在控制台输入以下代码完成：

```
(function () {
  var ctx = document.getElementById('qr-canvas').getContext('2d'),
      rects = '0,0,12,12 12,0,12,12 24,0,12,12 36,0,12,12 48,0,12,12 60,0,12,12 72,0,12,12 120,0,12,12 132,0,12,12 144,0,12,12 168,0,12,12 180,0,12,12 192,0,12,12 204,0,12,12 216,0,12,12 228,0,12,12 240,0,12,12 0,12,12,12 72,12,12,12 96,12,12,12 108,12,12,12 120,12,12,12 144,12,12,12 168,12,12,12 240,12,12,12 0,24,12,12 24,24,12,12 36,24,12,12 48,24,12,12 72,24,12,12 120,24,12,12 132,24,12,12 144,24,12,12 168,24,12,12 192,24,12,12 204,24,12,12 216,24,12,12 240,24,12,12 0,36,12,12 24,36,12,12 36,36,12,12 48,36,12,12 72,36,12,12 96,36,12,12 108,36,12,12 144,36,12,12 168,36,12,12 192,36,12,12 204,36,12,12 216,36,12,12 240,36,12,12 0,48,12,12 24,48,12,12 36,48,12,12 48,48,12,12 72,48,12,12 108,48,12,12 144,48,12,12 168,48,12,12 192,48,12,12 204,48,12,12 216,48,12,12 240,48,12,12 0,60,12,12 72,60,12,12 96,60,12,12 132,60,12,12 168,60,12,12 240,60,12,12 0,72,12,12 12,72,12,12 24,72,12,12 36,72,12,12 48,72,12,12 60,72,12,12 72,72,12,12 96,72,12,12 120,72,12,12 144,72,12,12 168,72,12,12 180,72,12,12 192,72,12,12 204,72,12,12 216,72,12,12 228,72,12,12 240,72,12,12 108,84,12,12 0,96,12,12 12,96,12,12 24,96,12,12 36,96,12,12 48,96,12,12 72,96,12,12 84,96,12,12 96,96,12,12 132,96,12,12 156,96,12,12 180,96,12,12 204,96,12,12 228,96,12,12 0,108,12,12 24,108,12,12 36,108,12,12 60,108,12,12 120,108,12,12 132,108,12,12 144,108,12,12 156,108,12,12 168,108,12,12 216,108,12,12 240,108,12,12 12,120,12,12 36,120,12,12 48,120,12,12 60,120,12,12 72,120,12,12 84,120,12,12 108,120,12,12 120,120,12,12 144,120,12,12 168,120,12,12 180,120,12,12 228,120,12,12 24,132,12,12 36,132,12,12 60,132,12,12 84,132,12,12 96,132,12,12 108,132,12,12 120,132,12,12 132,132,12,12 144,132,12,12 156,132,12,12 168,132,12,12 204,132,12,12 216,132,12,12 0,144,12,12 12,144,12,12 24,144,12,12 48,144,12,12 72,144,12,12 84,144,12,12 96,144,12,12 108,144,12,12 144,144,12,12 180,144,12,12 204,144,12,12 228,144,12,12 96,156,12,12 108,156,12,12 120,156,12,12 144,156,12,12 180,156,12,12 204,156,12,12 216,156,12,12 228,156,12,12 240,156,12,12 0,168,12,12 12,168,12,12 24,168,12,12 36,168,12,12 48,168,12,12 60,168,12,12 72,168,12,12 96,168,12,12 108,168,12,12 120,168,12,12 132,168,12,12 156,168,12,12 192,168,12,12 204,168,12,12 216,168,12,12 228,168,12,12 0,180,12,12 72,180,12,12 108,180,12,12 180,180,12,12 192,180,12,12 204,180,12,12 216,180,12,12 228,180,12,12 0,192,12,12 24,192,12,12 36,192,12,12 48,192,12,12 72,192,12,12 96,192,12,12 108,192,12,12 120,192,12,12 132,192,12,12 156,192,12,12 192,192,12,12 228,192,12,12 0,204,12,12 24,204,12,12 36,204,12,12 48,204,12,12 72,204,12,12 96,204,12,12 120,204,12,12 132,204,12,12 144,204,12,12 156,204,12,12 168,204,12,12 180,204,12,12 204,204,12,12 216,204,12,12 0,216,12,12 24,216,12,12 36,216,12,12 48,216,12,12 72,216,12,12 96,216,12,12 144,216,12,12 168,216,12,12 180,216,12,12 204,216,12,12 216,216,12,12 0,228,12,12 72,228,12,12 96,228,12,12 132,228,12,12 144,228,12,12 156,228,12,12 168,228,12,12 180,228,12,12 204,228,12,12 216,228,12,12 0,240,12,12 12,240,12,12 24,240,12,12 36,240,12,12 48,240,12,12 60,240,12,12 72,240,12,12 96,240,12,12 108,240,12,12 120,240,12,12 144,240,12,12 228,240,12,12';

  rects.split(' ').forEach(function () {
    ctx.fillRect.apply(ctx, arguments[0].split(','));
  });
})();
```

##第四关 —— 图案，疯狂的猜测##

本关类似于看图识字的游戏，在文本框输入图片对应的关键字即可，主要有以下这些：

```
github
v
css sprite
stackoverflow
underscore
jade
php
less
wordpress
sublime text
w3
grunt
npm
```

##第五关 —— 寻找，无尽的房间##

这关看得云里来雾里去，最开始一直更改url中查询字符串room的值，提示你不要人肉。控制台叫你用jquery通关，尝试许久，总结如下方法，在控制台运行后直接通关：

```js
(function ($, loc) {
  var ready = false,
      message = $('#message').text(),
      url = '';

  function query(param) {
    var match = RegExp('[?&]' + param + '=([^&]*)').exec(loc.href.split('#')[0]);
    return match && decodeURIComponent(match[1].replace(/\+/g, ' '));
  }

  (function yoda(t, next_room) {
    $.get(loc.href.split('?')[0], {
      t: t,
      room: next_room
    }, function (resp) {
      var msg = $('#message', resp).text(),
          nextRoom = $('#next-room', resp).text();

      console.log(message += msg);

      if (ready) {
        url += msg;
      } else if (msg === '/quiz3/i') {
        ready = !ready;
        url += msg;
      }

      if (nextRoom) {
        yoda(t, nextRoom);
      } else {
        var nextUrl = loc.protocol + '//' + loc.host + url;
        console.warn('点击进入下一关^_^: ' + nextUrl);
        setTimeout(function () { loc.href = nextUrl; }, 1000);
      }
    });
  })(query('t'), $('#next-room').text());
})(jQuery, location);
```

##第六关 —— 消除! 最后的任务##

这关没想到什么好办法，浏览js文件`http://ued.campus.alibaba.com/quiz3/assets/js/step5.js`看到里面有`window.location`，于是直接在控制台输入如下代码，顺利通关：

```js
var p = document.getElementById('page').getAttributeNode('data-p').nodeValue;
window.location = Base64.decode(p);
```



